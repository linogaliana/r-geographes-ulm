<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Lino Galiana">

<title>Introduction aux méthodes quantitatives avec  - Manipuler des données spatiales avec sf</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/quarto-contrib/fontawesome6-0.1.0/all.css" rel="stylesheet">
<link href="../site_libs/quarto-contrib/fontawesome6-0.1.0/latex-fontsize.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="../site_libs/htmlwidgets-1.6.2/htmlwidgets.js"></script>
<script src="../site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="../site_libs/leaflet-1.3.1/leaflet.css" rel="stylesheet">
<script src="../site_libs/leaflet-1.3.1/leaflet.js"></script>
<link href="../site_libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet">
<script src="../site_libs/proj4-2.6.2/proj4.min.js"></script>
<script src="../site_libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="../site_libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet">
<script src="../site_libs/leaflet-binding-2.2.0/leaflet.js"></script>


<link rel="stylesheet" href="../styles.css">
<meta name="twitter:title" content="Introduction aux méthodes quantitatives avec  - Manipuler des données spatiales avec sf">
<meta name="twitter:description" content="">
<meta name="twitter:image" content="https://rgeo.linogaliana.fr/cards/version-light/baby.png">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Introduction aux méthodes quantitatives avec <i class="fa-brands fa-r-project" aria-label="r-project"></i></span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html" rel="" target="">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../exercises/r-base.html" rel="" target="">
 <span class="menu-text">Introduction</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../exercises/r-wrangling.html" rel="" target="">
 <span class="menu-text">Manipulation</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/linogaliana/r-geographie" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools ms-auto">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#lire-et-enrichir-des-données-spatiales" id="toc-lire-et-enrichir-des-données-spatiales" class="nav-link active" data-scroll-target="#lire-et-enrichir-des-données-spatiales"><span class="header-section-number">1</span> Lire et enrichir des données spatiales</a></li>
  <li><a href="#utiliser-des-données-géographiques-comme-des-couches-graphiques" id="toc-utiliser-des-données-géographiques-comme-des-couches-graphiques" class="nav-link" data-scroll-target="#utiliser-des-données-géographiques-comme-des-couches-graphiques"><span class="header-section-number">2</span> Utiliser des données géographiques comme des couches graphiques</a></li>
  <li><a href="#jointures-spatiales" id="toc-jointures-spatiales" class="nav-link" data-scroll-target="#jointures-spatiales"><span class="header-section-number">3</span> Jointures spatiales</a></li>
  <li><a href="#exercices-supplémentaires" id="toc-exercices-supplémentaires" class="nav-link" data-scroll-target="#exercices-supplémentaires"><span class="header-section-number">4</span> Exercices supplémentaires</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Manipuler des données spatiales avec <code>sf</code></h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Lino Galiana </p>
          </div>
  </div>
    
  
    
  </div>
  

</header>

<div class="badge">
<p><a href="https://datalab.sspcloud.fr/launcher/ide/rstudio?autoLaunch=true&amp;init.personalInit=«https%3A%2F%2Fraw.githubusercontent.com%2Flinogaliana%2Fr-geographie%2Fmain%2Fsspcloud%2Finit.sh»&amp;networking.user.enabled=true&amp;onyxia.friendlyName=«rstudio-cours-ENS»" target="_blank" rel="noopener"><img src="https://img.shields.io/badge/Tester%20via%20SSP%20cloud%20-%20SSPCloud?logo=R&amp;labelColor=black&amp;color=%231965b8" alt="Onyxia"></a><br></p>
</div>
<details>
<summary>
Dérouler les <em>slides</em> ci-dessous ou <a href="../slides/wrangling.html">cliquer ici</a> pour afficher les slides en plein écran.
</summary>
<div class="sourceCode" id="cb1"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><iframe class="sourceCode yaml code-with-copy" src="/slides/wrangling.html"></iframe></div>
</details>
<p>Dans ce troisième TP, nous allons apprendre à importer et manipuler des données spatiales avec <i class="fa-brands fa-r-project" aria-label="r-project"></i>. Ce logiciel propose des fonctionnalités très intéressantes pour ce type de données complexes qui le rendent capable de se comporter comme un SIG. Grâce à la librairie <code>sf</code>, une extension de <code>dplyr</code> aux données spatiales, les données géographiques pourront être manipulées comme n’importe quel type de données avec <i class="fa-brands fa-r-project" aria-label="r-project"></i>. La complexité induite par la dimension spatiale ne sera pas ressentie.</p>
<p>Si vous êtes intéressés par <code>Python</code> <i class="fa-brands fa-python" aria-label="python"></i>, une version très proche de ce TP est disponible dans <a href="https://pythonds.linogaliana.fr/content/manipulation/03_geopandas_TP.html">mon cours de l’ENSAE</a>.</p>
<p>Dans ce chapitre, nous allons utiliser les packages suivants:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(units)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(leaflet)</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(cartiflette)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Certains exemples de code présentent des annotations sur le côté, passez votre souris dessus pour les afficher, comme ci-dessous</p>
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-1"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><button class="code-annotation-anchor" data-target-cell="annotated-cell-1" data-target-annotation="1">1</button><span id="annotated-cell-1-1" class="code-annotation-target"><a href="#annotated-cell-1-1" aria-hidden="true" tabindex="-1"></a><span class="st">"une annotation explicative m'accompagne à droite"</span></span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-1" data-target-annotation="1">1</dt>
<dd>
<span data-code-lines="1" data-code-cell="annotated-cell-1" data-code-annotation="1">Je m’affiche quand on passe la souris sur moi 🐭 !</span>
</dd>
</dl>
</div>
</div>
</div>
</div>
<section id="lire-et-enrichir-des-données-spatiales" class="level2" data-number="1">
<h2 data-number="1" class="anchored" data-anchor-id="lire-et-enrichir-des-données-spatiales"><span class="header-section-number">1</span> Lire et enrichir des données spatiales</h2>
<p>Dans cette partie, nous utiliserons les fonds de carte de l’IGN dont la mise à disposition est facilitée par le projet <a href="https://github.com/InseeFrLab/cartiflette.git"><code>cartiflette</code></a><a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercice 1: lire et explorer la structure de fichiers géographiques
</div>
</div>
<div class="callout-body-container callout-body">
<ol type="1">
<li>S’inspirer des exemples de code présents dans les slides mobilisant le package <code>cartiflette</code> pour télécharger les données communales des départements 75, 92, 93 et 94. Vous pouvez nommer l’objet <code>communes_borders</code></li>
<li>Regarder les premières lignes des données. Identifier la différence avec un DataFrame standard.</li>
<li>Afficher le <code>crs</code> de <code>communes_borders</code>. Ce dernier contrôle la transformation de l’espace tridimensionnel terrestre en une surface plane. Utiliser <code>st_transform</code> pour transformer les données en Lambert 93, le système officiel (code EPSG 2154).</li>
<li>Afficher les communes des Hauts de Seine (département 92) et représenter rapidement la carte.</li>
<li>Réprésenter la carte de Paris : quel est le problème ?</li>
</ol>
</div>
</div>
<details>
<summary>
Si vous désirez observer l’aspect de la carte du 92 (question 4), déroulez cette partie.
</summary>
<div class="cell">
<div class="cell-output-display">
<p><img src="geospatial-wrangling_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</details>
<p>En ce qui concerne Paris, à l’issue de la question 5, la carte aura l’aspect suivant:</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="geospatial-wrangling_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>On remarque rapidement le problème. On ne dispose ainsi pas des limites des arrondissements parisiens, ce qui appauvrit grandement la carte de Paris.</p>
<p>On pourrait les récupérer directement depuis le site d’<em>open-data</em> du Grand Paris mais on propose ici d’utiliser à nouveau <code>cartiflette</code> afin de disposer du fonds de carte officiel des arrondissements.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercice 2: compléter des données spatiales issues de sources différentes
</div>
</div>
<div class="callout-body-container callout-body">
<ol type="1">
<li>Importer les données de découpage des arrondissements parisiens à l’adresse à l’aide de <code>cartiflette</code>.</li>
<li>Vérifier sur une carte que les découpages des arrondissements sont bien présents.</li>
<li>Vérifier l’attribut <code>crs</code>. Est-il cohérent avec celui des données communales ? Si non, transformer en Lambert 93 (code EPSG 2154).</li>
<li>Retirer Paris du jeu de données communales et utiliser les arrondissements pour enrichir (nommer l’objet obtenu <code>data_borders</code>).</li>
<li>Représenter à nouveau les communes de la petite couronne parisienne (75, 92, 93, 94)</li>
</ol>
</div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>Reading layer `raw' from data source 
  `https://minio.lab.sspcloud.fr/projet-cartiflette/diffusion/shapefiles-test2/year=2022/administrative_level=ARRONDISSEMENT_MUNICIPAL/crs=4326/DEPARTEMENT=75/vectorfile_format=geojson/provider=IGN/source=EXPRESS-COG-CARTO-TERRITOIRE/raw.geojson' 
  using driver `GeoJSON'
Simple feature collection with 20 features and 8 fields
Geometry type: POLYGON
Dimension:     XY
Bounding box:  xmin: 2.224217 ymin: 48.81556 xmax: 2.469851 ymax: 48.90215
Geodetic CRS:  WGS 84</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 20 features and 8 fields
Geometry type: POLYGON
Dimension:     XY
Bounding box:  xmin: 2.224217 ymin: 48.81556 xmax: 2.469851 ymax: 48.90215
Geodetic CRS:  WGS 84
First 10 features:
                         ID                      NOM                    NOM_M
1  ARR_MUNI0000000009736045  Paris 3e Arrondissement  PARIS 3E ARRONDISSEMENT
2  ARR_MUNI0000000009736046  Paris 2e Arrondissement  PARIS 2E ARRONDISSEMENT
3  ARR_MUNI0000000009736545  Paris 4e Arrondissement  PARIS 4E ARRONDISSEMENT
4  ARR_MUNI0000000009736544  Paris 5e Arrondissement  PARIS 5E ARRONDISSEMENT
5  ARR_MUNI0000000009736543  Paris 6e Arrondissement  PARIS 6E ARRONDISSEMENT
6  ARR_MUNI0000000009736043  Paris 9e Arrondissement  PARIS 9E ARRONDISSEMENT
7  ARR_MUNI0000000009736042 Paris 10e Arrondissement PARIS 10E ARRONDISSEMENT
8  ARR_MUNI0000000009736035 Paris 11e Arrondissement PARIS 11E ARRONDISSEMENT
9  ARR_MUNI0000000009736531 Paris 13e Arrondissement PARIS 13E ARRONDISSEMENT
10 ARR_MUNI0000000009736044  Paris 8e Arrondissement  PARIS 8E ARRONDISSEMENT
   INSEE_ARM INSEE_COM POPULATION INSEE_DEP                           source
1      75103     75056      34025        75 IGN:EXPRESS-COG-CARTO-TERRITOIRE
2      75102     75056      21595        75 IGN:EXPRESS-COG-CARTO-TERRITOIRE
3      75104     75056      29131        75 IGN:EXPRESS-COG-CARTO-TERRITOIRE
4      75105     75056      58227        75 IGN:EXPRESS-COG-CARTO-TERRITOIRE
5      75106     75056      40303        75 IGN:EXPRESS-COG-CARTO-TERRITOIRE
6      75109     75056      60026        75 IGN:EXPRESS-COG-CARTO-TERRITOIRE
7      75110     75056      86472        75 IGN:EXPRESS-COG-CARTO-TERRITOIRE
8      75111     75056     145208        75 IGN:EXPRESS-COG-CARTO-TERRITOIRE
9      75113     75056     180005        75 IGN:EXPRESS-COG-CARTO-TERRITOIRE
10     75108     75056      35655        75 IGN:EXPRESS-COG-CARTO-TERRITOIRE
                         geometry
1  POLYGON ((2.350164 48.86199...
2  POLYGON ((2.347918 48.87069...
3  POLYGON ((2.368491 48.85581...
4  POLYGON ((2.336657 48.83967...
5  POLYGON ((2.332916 48.85934...
6  POLYGON ((2.325888 48.86958...
7  POLYGON ((2.364714 48.88437...
8  POLYGON ((2.376905 48.87205...
9  POLYGON ((2.364204 48.8164,...
10 POLYGON ((2.327165 48.88346...</code></pre>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<p><img src="geospatial-wrangling_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>La carte de Paris intra-muros est, après la récupération des arrondissements avec <code>cartiflette</code> de ce type là:</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="geospatial-wrangling_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="utiliser-des-données-géographiques-comme-des-couches-graphiques" class="level2" data-number="2">
<h2 data-number="2" class="anchored" data-anchor-id="utiliser-des-données-géographiques-comme-des-couches-graphiques"><span class="header-section-number">2</span> Utiliser des données géographiques comme des couches graphiques</h2>
<p>Souvent, le découpage communal ne sert qu’en fond de cartes, pour donner des repères. En complément de celui-ci, on peut désirer exploiter un autre jeu de données.</p>
<p>On va partir des données de localisation des stations velib, disponibles <a href="https://opendata.paris.fr/explore/dataset/velib-emplacement-des-stations/table/">sur le site d’open data de la ville de Paris</a> et requêtables directement par l’url <a href="https://opendata.paris.fr/explore/dataset/velib-emplacement-des-stations/download/?format=geojson&amp;timezone=Europe/Berlin&amp;lang=fr" class="uri">https://opendata.paris.fr/explore/dataset/velib-emplacement-des-stations/download/?format=geojson&amp;timezone=Europe/Berlin&amp;lang=fr</a></p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercice 3: importer et explorer les données velib
</div>
</div>
<div class="callout-body-container callout-body">
<ol type="1">
<li>Importer les données velib sous le nom <code>station</code></li>
<li>Vérifier la projection géographique de <code>station</code> (attribut <code>crs</code>). Si celle-ci est différente des données communales, reprojeter ces dernières dans le même système de projection que les stations de vélib</li>
<li>Représenter sur une carte les 50 stations les plus importantes (variable <code>capacity</code>). Vous pouvez également afficher le fonds de carte des arrondissements de Paris. Cette <a href="https://geopandas.org/mapping.html#maps-with-layers">page</a> peut vous aider pour comprendre comment afficher plusieurs couches à la fois. Vous pouvez customiser la carte en retirant les axes grâce à la méthode <code>set_axis_off</code> et mettre un titre tel que <em>“Les 50 principales stations de Vélib”</em> avec la méthode <code>set_title</code>.</li>
<li>Afficher également (trait bleu et épais) les réseaux de transport en communs, disponibles <a href="https://data.iledefrance-mobilites.fr/explore/dataset/traces-du-reseau-ferre-idf/map/?location=7,48.69717,2.33167&amp;basemap=jawg.streets">ici</a>. L’url à requêter est <a href="https://data.iledefrance-mobilites.fr/explore/dataset/traces-du-reseau-ferre-idf/download/?format=geojson&amp;timezone=Europe/Berlin&amp;lang=fr" class="uri">https://data.iledefrance-mobilites.fr/explore/dataset/traces-du-reseau-ferre-idf/download/?format=geojson&amp;timezone=Europe/Berlin&amp;lang=fr</a></li>
</ol>
</div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 6 features and 4 fields
Geometry type: POINT
Dimension:     XY
Bounding box:  xmin: 2.254911 ymin: 48.84097 xmax: 2.379057 ymax: 48.89792
Geodetic CRS:  WGS 84
  capacity                                name stationcode     coordonnees_geo
1       42     Porte de Saint-Ouen - Bessières       17044 48.897922, 2.328515
2       44              Ramponeau - Belleville       20143 48.871031, 2.379057
3       30            Saint-Cloud - Hippodrome       16138 48.857721, 2.254911
4       23             Porte Pouchet-Bessières       17008 48.897877, 2.323063
5       49 Gare du Nord - Hôpital Lariboisière       10107 48.881949, 2.352339
6       49               Exelmans - Versailles       16039   48.84097, 2.26439
                   geometry
1 POINT (2.328515 48.89792)
2 POINT (2.379057 48.87103)
3 POINT (2.254911 48.85772)
4 POINT (2.323063 48.89788)
5 POINT (2.352339 48.88195)
6  POINT (2.26439 48.84097)</code></pre>
</div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>Coordinate Reference System:
  User input: WGS 84 
  wkt:
GEOGCRS["WGS 84",
    DATUM["World Geodetic System 1984",
        ELLIPSOID["WGS 84",6378137,298.257223563,
            LENGTHUNIT["metre",1]]],
    PRIMEM["Greenwich",0,
        ANGLEUNIT["degree",0.0174532925199433]],
    CS[ellipsoidal,2],
        AXIS["geodetic latitude (Lat)",north,
            ORDER[1],
            ANGLEUNIT["degree",0.0174532925199433]],
        AXIS["geodetic longitude (Lon)",east,
            ORDER[2],
            ANGLEUNIT["degree",0.0174532925199433]],
    ID["EPSG",4326]]</code></pre>
</div>
</div>
<p>La carte attendu à l’issue de la question 3 a l’aspect suivant:</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="geospatial-wrangling_files/figure-html/unnamed-chunk-19-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>Reading layer `OGRGeoJSON' from data source 
  `https://data.iledefrance-mobilites.fr/explore/dataset/traces-du-reseau-ferre-idf/download/?format=geojson&amp;timezone=Europe/Berlin&amp;lang=fr' 
  using driver `GeoJSON'
Simple feature collection with 1638 features and 21 fields
Geometry type: LINESTRING
Dimension:     XY
Bounding box:  xmin: 1.149741 ymin: 47.95678 xmax: 3.512889 ymax: 49.4262
Geodetic CRS:  WGS 84</code></pre>
</div>
</div>
<p>L’ajout du réseau de métro permet d’obtenir une carte ressemblant à celle-ci:</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="geospatial-wrangling_files/figure-html/unnamed-chunk-21-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Pour faire une belle carte, il faudrait couper les lignes de métro via une jointure spatiale ou privilégier un fonds de carte conceptuel. La méthode pour faire des cartes contextuelles est proposée en <a href="#exo-supp">exercice supplémentaire 👇️</a>. puisqu’elle implique des connaissances minimales avec <code>leaflet</code> que nous verrons ultérieurement.</p>
</section>
<section id="jointures-spatiales" class="level2" data-number="3">
<h2 data-number="3" class="anchored" data-anchor-id="jointures-spatiales"><span class="header-section-number">3</span> Jointures spatiales</h2>
<p>Les jointures attributaires fonctionnent comme avec un <code>tibble</code> classique. Pour conserver un objet spatial <em>in fine</em>, il faut faire attention à utiliser en premier (base de gauche) l’objet <code>sf</code>. En revanche, l’un des intérêts des objets geopandas est qu’on peut également faire une jointure sur la dimension spatiale grâce à plusieurs fonctions:</p>
<table class="table">
<colgroup>
<col style="width: 45%">
<col style="width: 54%">
</colgroup>
<thead>
<tr class="header">
<th>Fonction</th>
<th>Opération</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>st_intersects()</code></td>
<td>Quelles géométries de x intersectent celles de y ?</td>
</tr>
<tr class="even">
<td><code>st_contains()</code></td>
<td>Quelles géométries de x contiennent celles de y ?</td>
</tr>
<tr class="odd">
<td><code>st_disjoint()</code></td>
<td>Quelles géométries de x sont disjointes à celles de y ?</td>
</tr>
<tr class="even">
<td><code>st_is_within_distance()</code></td>
<td>Quelles géométries de x est à moins de</td>
</tr>
<tr class="odd">
<td>m/km de celles de y ?</td>
<td></td>
</tr>
</tbody>
</table>
<p>La documentation à laquelle se référer est <a href="https://cran.r-project.org/web/packages/sfnetworks/vignettes/sfn03_join_filter.html">ici</a>. Une version pédagogique se trouve dans la documentation <a href="https://www.book.utilitr.org/03_fiches_thematiques/fiche_donnees_spatiales#joindre-des-donn%C3%A9es-g%C3%A9ographiques-et-attributaires"><code>utilitR</code></a>.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercice 4: Associer les stations aux communes et arrondissements auxquels elles appartiennent
</div>
</div>
<div class="callout-body-container callout-body">
<ol type="1">
<li>Faire une jointure spatiale pour enrichir les données de stations en y ajoutant des informations de <code>data_paris</code>. Appeler cet objet <code>stations_info</code></li>
<li>Représenter la carte des stations du 19e arrondissement (s’aider de la variable <code>NOM</code>). Vous pouvez mettre en fond de carte les arrondissements parisiens.</li>
<li>Compter le nombre de stations velib et le nombre de places velib par arrondissement ou commune (pour vous aider, vous pouvez compléter vos connaissances avec <a href="https://pandas.pydata.org/docs/getting_started/intro_tutorials/06_calculate_statistics.html">ce tutoriel</a>). Représenter sur une carte chacune des informations</li>
<li>Représenter les mêmes informations mais en densité (diviser par la surface de l’arrondissement ou commune en km2)</li>
<li>(optionnel) Choisir une des cartes de densité et la nettoyer (retirer les axes, mettre les titres…)</li>
</ol>
</div>
</div>
<p>Pour la question 2, la première méthode consiste à afficher toute la ville mais à ne représenter que les points des stations du 19e:</p>
<div class="cell">
<div class="cell-output-display">
<div class="leaflet html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-ef2be8e7fa6ee65b9d14" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-ef2be8e7fa6ee65b9d14">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addTiles","args":["https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"https://openstreetmap.org/copyright/\">OpenStreetMap<\/a>,  <a href=\"https://opendatacommons.org/licenses/odbl/\">ODbL<\/a>"}]},{"method":"addCircleMarkers","args":[[48.88125496378118,48.88879655647339,48.87743668150217,48.88312177435829,48.87959698688813,48.87560449998637,48.88638649998639,48.88366699998637,48.88625244469679,48.87556591005936,48.87302160154636,48.89410414030268,48.89882999998643,48.8973836971887,48.89835196547124,48.89088305226186,48.87688699998636,48.90098953628695,48.88937109273338,48.8959473684999,48.87550448458637,48.88377967233389,48.88919972556338,48.8805976940569,48.89116299998641,48.88005222199531,48.89717672823684,48.89197621430005,48.89064298988401,48.8887899999864,48.89659571177545,48.8963764999864,48.88933353844182,48.88603131997809,48.88049340323288,48.88467214208102,48.87916649998637,48.89260159187663,48.88179064198933,48.8906230999864,48.89876016218626,48.87660099998637,48.88678574146608,48.88467368536965,48.88801328143439,48.88339733853167,48.88650687532972,48.88192765860404,48.87649965411313,48.88270066219708,48.88449223839392,48.87979886048633,48.87268773138636,48.89464999998641,48.88917613742432,48.87508988830807,48.87795099998637,48.88639367942238,48.88256264246598,48.87787062697436,48.88624891729119],[2.373463287949563,2.392581193192199,2.386074364185334,2.386367060244084,2.388791333747706,2.399554900000001,2.382577200000001,2.395733,2.36892968416214,2.393046095967299,2.3799109831452,2.37294608846728,2.37933,2.395998537540436,2.386150136590004,2.368857935070992,2.374454,2.388702258467675,2.3979396821544,2.381133802246314,2.3890327325519,2.376477420330048,2.3950181901455,2.376949489116669,2.386570499999999,2.4008650346327,2.374517396092415,2.385128885507583,2.376255467534065,2.378499999999999,2.384599149227142,2.374369200000001,2.370785437524319,2.389575317502023,2.398064173758029,2.391969859600068,2.378795900000001,2.379091568291188,2.403059937764268,2.3833701,2.375325746834278,2.391769,2.374619320034981,2.380039058625698,2.3737595955229,2.371074522980134,2.393815540130837,2.392586767673493,2.379407362599103,2.374717555940152,2.370394170284272,2.374839261174202,2.376461327076,2.381868,2.383365333080291,2.382630407810211,2.381464,2.386541454435501,2.381262481212616,2.395907342433901,2.377459108829498],[5.099019513592784,7.745966692414834,5.196152422706632,4.795831523312719,4.58257569495584,6.403124237432849,4.358898943540674,4.123105625617661,4.358898943540674,4.58257569495584,4.123105625617661,7.483314773547883,8.18535277187245,7.071067811865476,5.196152422706632,4.795831523312719,4.69041575982343,4.69041575982343,6.708203932499369,6.557438524302,4.47213595499958,5.291502622129181,5.744562646538029,5.196152422706632,5.744562646538029,5.744562646538029,6.324555320336759,5.099019513592784,7.416198487095663,5.477225575051661,5.477225575051661,6.082762530298219,6.48074069840786,4.795831523312719,4.242640687119285,4.47213595499958,4.47213595499958,5.477225575051661,5.567764362830022,5.477225575051661,5.477225575051661,5.385164807134504,4.358898943540674,5.830951894845301,4.58257569495584,4,4.69041575982343,4.123105625617661,5.099019513592784,5.291502622129181,4.898979485566356,4.898979485566356,6.928203230275509,5.099019513592784,4.898979485566356,4.898979485566356,4.47213595499958,5.656854249492381,5.196152422706632,5.291502622129181,5.477225575051661],null,null,{"interactive":true,"className":"","stroke":false,"color":["#FECC5C","#E31A1C","#FD8D3C","#FECC5C","#FFFFB2","#E31A1C","#FFFFB2","#FFFFB2","#FFFFB2","#FFFFB2","#FFFFB2","#E31A1C","#E31A1C","#E31A1C","#FD8D3C","#FECC5C","#FECC5C","#FECC5C","#E31A1C","#E31A1C","#FFFFB2","#FD8D3C","#E31A1C","#FD8D3C","#E31A1C","#E31A1C","#E31A1C","#FECC5C","#E31A1C","#FD8D3C","#FD8D3C","#E31A1C","#E31A1C","#FECC5C","#FFFFB2","#FFFFB2","#FFFFB2","#FD8D3C","#FD8D3C","#FD8D3C","#FD8D3C","#FD8D3C","#FFFFB2","#E31A1C","#FFFFB2","#FFFFB2","#FECC5C","#FFFFB2","#FECC5C","#FD8D3C","#FECC5C","#FECC5C","#E31A1C","#FECC5C","#FECC5C","#FECC5C","#FFFFB2","#FD8D3C","#FD8D3C","#FD8D3C","#FD8D3C"],"weight":5,"opacity":0.5,"fill":true,"fillColor":["#FECC5C","#E31A1C","#FD8D3C","#FECC5C","#FFFFB2","#E31A1C","#FFFFB2","#FFFFB2","#FFFFB2","#FFFFB2","#FFFFB2","#E31A1C","#E31A1C","#E31A1C","#FD8D3C","#FECC5C","#FECC5C","#FECC5C","#E31A1C","#E31A1C","#FFFFB2","#FD8D3C","#E31A1C","#FD8D3C","#E31A1C","#E31A1C","#E31A1C","#FECC5C","#E31A1C","#FD8D3C","#FD8D3C","#E31A1C","#E31A1C","#FECC5C","#FFFFB2","#FFFFB2","#FFFFB2","#FD8D3C","#FD8D3C","#FD8D3C","#FD8D3C","#FD8D3C","#FFFFB2","#E31A1C","#FFFFB2","#FFFFB2","#FECC5C","#FFFFB2","#FECC5C","#FD8D3C","#FECC5C","#FECC5C","#E31A1C","#FECC5C","#FECC5C","#FECC5C","#FFFFB2","#FD8D3C","#FD8D3C","#FD8D3C","#FD8D3C"],"fillOpacity":0.5},null,null,["Marché Secrétan: 26 places disponibles","Cité de la Musique: 60 places disponibles","Carducci - Place Hannah Arendt: 27 places disponibles","Manin - Crimée: 23 places disponibles","Botzaris - Crimée: 21 places disponibles","Belleville - Télégraphe: 41 places disponibles","Lorraine - Jean Jaurès: 19 places disponibles","Ambroise Rendu - Porte Brunet: 17 places disponibles","Tanger - Place du Maroc: 19 places disponibles","Belleville -  Pré Saint-Gervais: 21 places disponibles","Rampal - Belleville: 17 places disponibles","Crimée - Ourcq: 56 places disponibles","Macdonald - Césaria Evora: 67 places disponibles","Grands Moulins de Pantin: 50 places disponibles","Porte de la Villette: 27 places disponibles","Aubervilliers - Curial: 23 places disponibles","Simon Bolivar - Henri Turot: 22 places disponibles","Emile Reynaud - Porte de la Villette: 22 places disponibles","Marseillaise - Grenade: 45 places disponibles","Cambrai - Benjamin Constant: 43 places disponibles","Lassus - Delouvain: 20 places disponibles","Melun - Jean Jaurès: 28 places disponibles","Porte de Pantin.: 33 places disponibles","Edouard Pailleron - Bouret: 27 places disponibles","Metz - Marne: 33 places disponibles","Hôpital Robert Debré: 33 places disponibles","Cesaria Evora - Rosa Parks: 40 places disponibles","Place Paul Delouvrier: 26 places disponibles","Mathis - Flandre: 55 places disponibles","Place de l'Édit de Nantes: 30 places disponibles","Cité des Sciences et de l'Industrie: 30 places disponibles","Gaston Tessier - Rosa Parks RER: 37 places disponibles","Centquatre: 42 places disponibles","Petit - Georges Thill: 23 places disponibles","Serrurier: 18 places disponibles","Manin - Carrières d'Amérique: 20 places disponibles","Manin - Secrétan: 20 places disponibles","Flandre - Ourcq: 30 places disponibles","Alexander Fleming - Belvédère: 31 places disponibles","Quai de l'Oise - Aisne: 30 places disponibles","Square Claude Bernard: 30 places disponibles","Solitaires - Place des Fêtes: 29 places disponibles","Seine - Flandre: 19 places disponibles","Laumière - Petit: 34 places disponibles","Flandre - Riquet: 21 places disponibles","Quai de la Loire - Jean Jaurès: 16 places disponibles","Petit - Manin: 22 places disponibles","Place de Rhin et Danube: 17 places disponibles","Manin - Simon Bolivar: 26 places disponibles","Lally-Tollendal - Armand Carrel: 28 places disponibles","Quai de la Seine: 24 places disponibles","Edouard Pailleron - Simon Bolivar: 24 places disponibles","Villette - Belleville: 48 places disponibles","Flandre - Alphonse Karr: 26 places disponibles","Thionville - Ourcq: 24 places disponibles","Square Simon Bolivar: 24 places disponibles","Botzaris - Parc des Buttes Chaumont: 20 places disponibles","Hautpoul - Jean Jaurès: 32 places disponibles","Mairie du 19ème: 27 places disponibles","Pré Saint-Gervais - Lilas: 28 places disponibles","Euryale Dehaynin - Loire: 30 places disponibles"],null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addPolylines","args":[[[[{"lng":[2.376904765014236,2.375372216142202,2.37509243793508,2.375041445925564,2.374534258323927,2.374279281685711,2.373535015365789,2.373300707155033,2.372830689233614,2.372341359986538,2.372328959752163,2.370665234162318,2.370575635491561,2.370481902873479,2.370290292159464,2.370287230194616,2.370287299693743,2.370286603805988,2.37028577743728,2.370270868008542,2.370255373353463,2.370250486642421,2.370243698467517,2.370239557787731,2.370238394195785,2.37022043511868,2.370220402493319,2.370223141869948,2.370224944514687,2.370227980182269,2.370223193614118,2.370203190783005,2.370168080363927,2.370145915920186,2.370083654434945,2.370032562091205,2.370000841921478,2.369948527322413,2.369897576172377,2.369864590259049,2.369817914580176,2.369765719421896,2.369725861314333,2.369683330520371,2.369557079692022,2.369470534479018,2.369455437564599,2.369403209315248,2.369301392563939,2.369249000722336,2.369204811831881,2.369145253477817,2.369019264019544,2.368922377037861,2.368828249426272,2.368723747096618,2.368718249261116,2.368683887772149,2.368674266549963,2.36861108493156,2.36857265448181,2.368532893155654,2.368498640571453,2.36845760288332,2.368419281394024,2.368371382235502,2.368327617369509,2.368275671113682,2.368227837343677,2.368110396400728,2.36805990093402,2.367977988946441,2.367883815783365,2.367740521566853,2.367546742687418,2.367471681156832,2.367000836343076,2.366843884299863,2.366334826059781,2.365305897682354,2.365269048492511,2.364713572113417,2.364800832876562,2.365469903950804,2.365490127687583,2.365807882719924,2.366553110290252,2.366703703181201,2.366762718491148,2.366846123075156,2.36705983102841,2.367132842372612,2.367217296526325,2.367259316263739,2.367326743206686,2.367412901445956,2.367560990457849,2.367670038381607,2.367872242172556,2.36804546267705,2.36808584999427,2.368123520875905,2.368127524696543,2.368139470689044,2.368738771328434,2.368818317548941,2.369157859960429,2.369167133956012,2.369191028102993,2.369214911405005,2.369541154621306,2.369873417738336,2.370012559240605,2.370035221900147,2.370162663571299,2.370438376738893,2.370457176828816,2.370500145422497,2.370639174782484,2.371791555807095,2.371344110693875,2.371267006547412,2.371267794839922,2.371224504844043,2.371175976445192,2.370461058200638,2.370437415371097,2.370420494086907,2.370402909395103,2.37038522675686,2.370351901799712,2.370351597269704,2.370349406775113,2.370345493446362,2.370342047783655,2.370329557193094,2.370312282818894,2.370311815108086,2.37031417749069,2.370316492053774,2.370322060937155,2.37032497808074,2.370300639936811,2.370262276721002,2.370257819149733,2.37025429708778,2.3702528151337,2.370333129296585,2.370331606503329,2.370332974861135,2.370334571644305,2.37023707886587,2.370183433709697,2.37017403106795,2.370170291188827,2.370181686088611,2.370228164842684,2.37025092897321,2.370301804653316,2.370535009708818,2.37096186316497,2.371646474533444,2.371841497918338,2.371846954028906,2.371864675537414,2.372017414094195,2.372073339233638,2.372163343377752,2.372582024082345,2.37270611813658,2.373859880662742,2.375345017135831,2.376564233996427,2.376618784463551,2.377349765264714,2.377416592050434,2.377807993861653,2.378071209021053,2.378709447205109,2.378720359464077,2.379775917060788,2.379856384301887,2.380268247390568,2.380350078692644,2.380371892524332,2.380427807195328,2.380616001028825,2.380817856626233,2.380973324399999,2.381018326826204,2.381378356992871,2.381720665505002,2.381837951110512,2.382005706007042,2.382113443394346,2.382226626258507,2.38260849202051,2.382791240731128,2.382960349114633,2.38304353395085,2.383121273309046,2.383238559044116,2.38334493250573,2.383385842920003,2.383565863671847,2.383624527854535,2.383840066784666,2.384530045616339,2.384871915446142,2.38505378883778,2.385436663122645,2.385581611347943,2.388185332320258,2.389265395555089,2.389332400904482,2.389418534011639,2.390648764868561,2.390837239618765,2.391007512366607,2.39107744463727,2.39113238333548,2.391196964614366,2.391249196196807,2.39133010320764,2.391379606639099,2.391441406994442,2.391492232236024,2.391672092544936,2.391772304908399,2.391967367584056,2.392198039985452,2.392379314021241,2.392446579433899,2.392637421313149,2.392723865964706,2.392789745940771,2.393433851559661,2.393878739782337,2.394390875859688,2.394629782616,2.395055428238459,2.39551809460183,2.395610584956599,2.395613354583406,2.395669185473695,2.395713634991735,2.395716425477908,2.395761000117235,2.395786062202648,2.3957944544896,2.395838966272525,2.395840361503268,2.395866808247499,2.395905801534079,2.395932258596785,2.395962901268387,2.395964379956462,2.39598519344668,2.396015721245967,2.396539383644064,2.396700898365535,2.396703678235643,2.396738494301983,2.396806731051419,2.396919496928808,2.396943120266674,2.397007087405704,2.397044568009204,2.397192022187578,2.397390853554831,2.39760920284006,2.397667826349162,2.397770121226809,2.397882252664049,2.39799944260082,2.398236114786815,2.398769474282696,2.398772315958186,2.398903121545699,2.398941654577956,2.39911130594204,2.399119799374467,2.399135941386649,2.399139498914749,2.399169562774806,2.399171860301647,2.39917431346504,2.399183788008384,2.399189611731325,2.399196286232862,2.399202078751086,2.399208130623515,2.399206829247258,2.399215712086218,2.399220265375465,2.399224082004894,2.399227597744506,2.39923217171942,2.399241811713724,2.399247479471482,2.399251617609397,2.399280885994178,2.399467486685999,2.399486970997728,2.399498118211742,2.399523191633703,2.399686131518929,2.399745978178279,2.399797518782036,2.399893615779398,2.399964639527467,2.400106665255306,2.400492240382726,2.400508810029977,2.400581844136197,2.400979747165696,2.401008650422907,2.401343288081368,2.401507160545184,2.401737410896384,2.402025238063837,2.402247274312455,2.4025405839864,2.402629666381498,2.402905145386395,2.403047703077026,2.403158703907276,2.403232724957177,2.40346708997794,2.403494493982591,2.403654858139889,2.403709676262499,2.403965958291773,2.40457585141299,2.405612426937694,2.406761832965059,2.406917638313953,2.407077544145843,2.407174586520525,2.407411010438595,2.407856546632826,2.408068396152383,2.408280224879402,2.408354026028352,2.408440118802962,2.409359835767223,2.409415210652019,2.409929745359618,2.41068219651571,2.410820319151064,2.410760440641718,2.410701915398665,2.409924373433165,2.409552235890694,2.409489712792931,2.409423160696298,2.409329411898952,2.409141914620066,2.408841663500866,2.408720739192817,2.408602541861494,2.40848568767348,2.408391939930439,2.40826558311064,2.408094346785544,2.40793407929123,2.407866165105367,2.407771075119309,2.407671925748521,2.407578209618405,2.407480423889493,2.406853189526919,2.406582644292136,2.406163368113694,2.406011141106451,2.405247303551713,2.405123667801268,2.40463189448168,2.404392774354757,2.403736460494906,2.403642707656814,2.402562321487233,2.402552808956575,2.399208122171168,2.398965987022432,2.398840694661717,2.3984808560407,2.397921938826138,2.397648115637934,2.39755957143151,2.395693488226971,2.395367943655133,2.395250770064705,2.395223492956283,2.394751518387969,2.393960209331528,2.393548189024705,2.39321795803578,2.39266515682634,2.392587320747309,2.392338826093333,2.39226238470668,2.392192854440722,2.392101521255398,2.392068801131714,2.391384384242512,2.391333940723904,2.39045749316421,2.389645129763283,2.389283291779059,2.388924056434099,2.388496636417807,2.388251798664939,2.387822628177838,2.387774933198164,2.387452080744171,2.387026969267485,2.386898997485623,2.386813394433955,2.38672785499497,2.386491686952801,2.386288143796639,2.385691787589019,2.385610488035465,2.385388318041417,2.385385602057697,2.385057372186395,2.384960981845434,2.384835909396155,2.384702604228078,2.384476733580484,2.384245378211706,2.383163139439734,2.383085559974287,2.383028408513118,2.382670514713277,2.382599773204042,2.382466459324237,2.381910082683457,2.380554122851399,2.379834493735429,2.379228115761801,2.378922346237482,2.378847591999131,2.378695367892953,2.3785499495884,2.378505112227343,2.378097358355699,2.377636578896359,2.377444994262884,2.377186879550823,2.3770390058737,2.376904765014236],"lat":[48.87204825942957,48.87342614859878,48.87367740156002,48.87372300144055,48.87417811391575,48.87440701106815,48.8750749211757,48.87528503825157,48.87570796159567,48.87614876838917,48.87615949537265,48.87765354577255,48.87773401462412,48.8778180589946,48.87799062235575,48.87835663435769,48.8784636552037,48.87852120877215,48.87858955363075,48.87948430980654,48.88020189412144,48.88049325139785,48.88128012922195,48.88139702026074,48.88149324237452,48.88196349700563,48.88196619482061,48.88230345750521,48.88237990991544,48.88246716074778,48.88252469258944,48.88260013095273,48.88268448311569,48.88271314501878,48.88278746169843,48.88284025323573,48.88286976415633,48.88291085795759,48.8829519589106,48.88297336917869,48.88299920402162,48.88303040575991,48.88305627645355,48.8830776364227,48.88314352195831,48.88319612655335,48.8832041409968,48.88323804038291,48.88331304761333,48.8833604359855,48.88340606889625,48.88348219794976,48.88363891637259,48.88375711696296,48.88387263402895,48.88394402926858,48.8839475975901,48.88396989959382,48.88397614415304,48.88401358272828,48.88403406458673,48.88405184143136,48.88406515068191,48.88407572615075,48.88408721526115,48.88410135181427,48.88411191285117,48.88412243070473,48.88413117158169,48.88414494105772,48.88414827185632,48.88415593343252,48.88416263089211,48.88417176687188,48.88418333399255,48.88418833342759,48.88422001945323,48.88423088080662,48.88426506010919,48.88432526096771,48.88432776360278,48.88436618656629,48.88447906546387,48.88519038353692,48.88520937657362,48.88554381088475,48.8863868269688,48.88656299205413,48.8866442434682,48.88685063002637,48.88733199944907,48.88749606246927,48.88772853455015,48.88786185661482,48.88803668181011,48.88824128359003,48.88862427849038,48.88885328259605,48.88927253556273,48.88960799803174,48.88965137866964,48.88969384563451,48.88970106134449,48.88972810406408,48.89102898681065,48.89121736432384,48.89200965680305,48.8920321886776,48.89208627379257,48.89214125816335,48.89290649917105,48.89362590509584,48.89396208323647,48.89400536977165,48.89418140731495,48.89450301457228,48.89452739500732,48.89458337863466,48.89470371873434,48.89539325117098,48.89573803974827,48.89579788923841,48.89584555720059,48.89592896643231,48.89599436179117,48.89657516186243,48.89661280888405,48.89665858508717,48.89675921612064,48.89686794047752,48.89736778521495,48.89739296446827,48.89746130098204,48.89755930586468,48.89761864260851,48.89797470602887,48.89850071478799,48.8985393828866,48.89868238642763,48.89871657257263,48.89882002308765,48.89891716444593,48.89935050621224,48.89970283577354,48.8998458033041,48.89991143472013,48.90025946145137,48.90061151538848,48.90073741127573,48.90084983264781,48.90094336963002,48.901109229987,48.90137154731787,48.90147222092043,48.90155583734849,48.90162874160505,48.90173330628049,48.90176849916868,48.9018479061681,48.90185272927204,48.90186216637159,48.90187655174945,48.90188027267749,48.90188030129283,48.90188129354645,48.90188479241891,48.90188508563221,48.90188735609026,48.90189584525854,48.90189919319518,48.90192231733336,48.90195435355508,48.90197959160533,48.90198077485196,48.90199626825733,48.90199751496019,48.90200584404911,48.90201080836536,48.90202491254187,48.90202496914659,48.90204752681562,48.90204884279141,48.90205726977728,48.90205859247926,48.90205960464481,48.90206079321324,48.90206536382893,48.90206820615374,48.90207170770801,48.90207283960134,48.90208099488301,48.90208815828987,48.9020905623015,48.90209322661901,48.90209558109373,48.90209886287023,48.90210622776532,48.90210986758158,48.9021134368474,48.90211566399264,48.90211696372229,48.90211936636236,48.90212171270518,48.90212282264025,48.90212644722973,48.90212584983379,48.90212516023572,48.90214759334483,48.90207650542661,48.90203876898619,48.90196069549111,48.90193086257545,48.9013821217425,48.90117539663126,48.90116134930707,48.90114470152554,48.90092703835539,48.90090731295101,48.90081105321917,48.9007799328815,48.90074783696893,48.90070769624121,48.90067378788961,48.9006373273134,48.90060340503888,48.9005677466028,48.90053742824357,48.90043761901089,48.90038326994954,48.90026645054128,48.90013722115921,48.90003292145592,48.89999639090356,48.89989034071243,48.89984671276465,48.89981197361535,48.89943752629949,48.89918527321502,48.89889738599867,48.89876279759336,48.89852213384331,48.89826456845758,48.89816970804311,48.89816612476688,48.89805669027579,48.89798766742901,48.89798228562817,48.89790247162871,48.89785853170888,48.8978405877773,48.89776616930444,48.89776347840205,48.89771774681824,48.89764869635751,48.89760206549333,48.89754736190828,48.89753747691434,48.89750700521899,48.89746219348959,48.896530445845,48.89624617684682,48.89624169427677,48.89617981693853,48.89605875313911,48.89586147175827,48.89582381948494,48.89571802239509,48.89566155424981,48.89541318621613,48.8950859367139,48.89472191302266,48.89460619613034,48.89425238001628,48.89387343230032,48.89352868383035,48.89264044858265,48.89027072525875,48.89026084701178,48.88968054313803,48.88953234875399,48.88865816140141,48.8886312243985,48.88853238010378,48.88846045227887,48.88762783158746,48.88754690416297,48.88745248768637,48.8872223088202,48.88707215125827,48.8868482535181,48.88670079371554,48.88653085213055,48.8865254496652,48.88634652903079,48.88618827106842,48.88609386131618,48.8860255304127,48.88586547386156,48.88562090631845,48.8854842376054,48.88536195037681,48.88530723849062,48.88497182750697,48.88493775092734,48.88491712238758,48.88487138262182,48.88457722142251,48.88447230054708,48.88437812988626,48.88420414266108,48.88407589522969,48.88382119874124,48.88349487648397,48.88347697295303,48.8834107885761,48.88307913042589,48.88305589257668,48.88277068152622,48.88263120604081,48.88252983370272,48.88240176873309,48.8823030523542,48.88217231552701,48.88213318970583,48.88201135626532,48.8819464163619,48.88189840616845,48.88186460076518,48.88176054759525,48.88174899289651,48.88167694637029,48.88165293760385,48.88153999934266,48.88126873960681,48.8810067904836,48.88077416997809,48.88074256616447,48.88071008312942,48.88068987918597,48.88064338535365,48.88055385851332,48.88050993981393,48.88046781929037,48.8804528954784,48.88043623370358,48.88025551337614,48.88018204175634,48.87953796271481,48.87859287837092,48.87843617580175,48.87842598848292,48.87841670712368,48.87820693093905,48.87807829075901,48.87806089512573,48.87803808361163,48.8780088425731,48.87795036027351,48.87785534778485,48.87781787810292,48.87778042176833,48.87774477060943,48.877715528829,48.87767623317431,48.87762682287133,48.87757207059408,48.8775492514613,48.87751820388854,48.87748443816564,48.87745249790513,48.87741873876865,48.87718270628379,48.87711391576315,48.87705517888237,48.87701305448542,48.87680061746791,48.87676223129057,48.87660510173585,48.87653106650491,48.87633624189468,48.87630789563711,48.87599853480827,48.87599578934054,48.87553927679557,48.87549129607515,48.87547897562445,48.87546997335771,48.87546266688874,48.87544330272647,48.87543656182901,48.87528146424084,48.87525463908229,48.87524775186431,48.8752485133918,48.87526861128429,48.87531407101824,48.87533716568176,48.87536157286905,48.87541452810743,48.87542492516781,48.87545514064018,48.8754628465727,48.87546249355748,48.87546113045207,48.87546096428833,48.87545928520449,48.87545902872947,48.87543928047541,48.87530293933719,48.87511583134199,48.87493952748931,48.87476467289009,48.874715757257,48.87469018057574,48.87468813798652,48.87466490234873,48.87464204158,48.8746260975425,48.87460137707342,48.87457126086753,48.87448101668789,48.87439903330131,48.87409919422547,48.87405650828326,48.87393575635035,48.87393484307123,48.87379016320762,48.87375549328978,48.87372517256791,48.87369930606791,48.87366127212811,48.87362590754894,48.87348723408346,48.87347604226991,48.87346675436694,48.87341004975764,48.87339709422238,48.87337212450431,48.8732676280753,48.8729890195908,48.87285578910706,48.87271504761873,48.87263252128838,48.87261324734573,48.87257378588734,48.87253525890252,48.87252243540988,48.87241779332714,48.87230118278018,48.87224712567625,48.87217023870873,48.87210921367981,48.87204825942957]}]]],null,null,{"interactive":true,"className":"","stroke":true,"color":"#03F","weight":5,"opacity":0.5,"fill":false,"fillColor":"#03F","fillOpacity":0.2,"smoothFactor":1,"noClip":false},null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[48.87204825942957,48.90214759334483],"lng":[2.364713572113417,2.410820319151064]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code>Joining with `by = join_by(ID, NOM, NOM_M, INSEE_COM, STATUT, POPULATION,
INSEE_CAN, INSEE_ARR, INSEE_DEP, INSEE_REG, SIREN_EPCI, source, INSEE_ARM)`</code></pre>
</div>
</div>
<p>Enfin, dans la question 4, si on représente plutôt la capacité sous forme de densité, pour tenir compte de la taille différente des arrondissements, on obtient cette carte:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 1531 features and 21 fields
Geometry type: POLYGON
Dimension:     XY
Bounding box:  xmin: 637298.9 ymin: 6843146 xmax: 671750.3 ymax: 6879246
Projected CRS: RGF93 / Lambert-93
First 10 features:
                         ID              NOM            NOM_M INSEE_COM
1  COMMUNE_0000000009736037 Levallois-Perret LEVALLOIS-PERRET     92044
2  COMMUNE_0000000009736037 Levallois-Perret LEVALLOIS-PERRET     92044
3  COMMUNE_0000000009736037 Levallois-Perret LEVALLOIS-PERRET     92044
4  COMMUNE_0000000009736037 Levallois-Perret LEVALLOIS-PERRET     92044
5  COMMUNE_0000000009736037 Levallois-Perret LEVALLOIS-PERRET     92044
6  COMMUNE_0000000009736037 Levallois-Perret LEVALLOIS-PERRET     92044
7  COMMUNE_0000000009736037 Levallois-Perret LEVALLOIS-PERRET     92044
8  COMMUNE_0000000009736037 Levallois-Perret LEVALLOIS-PERRET     92044
9  COMMUNE_0000000009736037 Levallois-Perret LEVALLOIS-PERRET     92044
10 COMMUNE_0000000009736037 Levallois-Perret LEVALLOIS-PERRET     92044
           STATUT POPULATION INSEE_CAN INSEE_ARR INSEE_DEP INSEE_REG
1  Commune simple      66082        16         2        92        11
2  Commune simple      66082        16         2        92        11
3  Commune simple      66082        16         2        92        11
4  Commune simple      66082        16         2        92        11
5  Commune simple      66082        16         2        92        11
6  Commune simple      66082        16         2        92        11
7  Commune simple      66082        16         2        92        11
8  Commune simple      66082        16         2        92        11
9  Commune simple      66082        16         2        92        11
10 Commune simple      66082        16         2        92        11
            SIREN_EPCI                           source INSEE_ARM
1  200054781/200057982 IGN:EXPRESS-COG-CARTO-TERRITOIRE      &lt;NA&gt;
2  200054781/200057982 IGN:EXPRESS-COG-CARTO-TERRITOIRE      &lt;NA&gt;
3  200054781/200057982 IGN:EXPRESS-COG-CARTO-TERRITOIRE      &lt;NA&gt;
4  200054781/200057982 IGN:EXPRESS-COG-CARTO-TERRITOIRE      &lt;NA&gt;
5  200054781/200057982 IGN:EXPRESS-COG-CARTO-TERRITOIRE      &lt;NA&gt;
6  200054781/200057982 IGN:EXPRESS-COG-CARTO-TERRITOIRE      &lt;NA&gt;
7  200054781/200057982 IGN:EXPRESS-COG-CARTO-TERRITOIRE      &lt;NA&gt;
8  200054781/200057982 IGN:EXPRESS-COG-CARTO-TERRITOIRE      &lt;NA&gt;
9  200054781/200057982 IGN:EXPRESS-COG-CARTO-TERRITOIRE      &lt;NA&gt;
10 200054781/200057982 IGN:EXPRESS-COG-CARTO-TERRITOIRE      &lt;NA&gt;
              area capacity                                  name stationcode
1  2.417473 [km^2]       39     Paul Vaillant Couturier - Chaptal       23001
2  2.417473 [km^2]       25                 Jules Guesde - Alsace       23006
3  2.417473 [km^2]       36 Paul Vaillant-Couturier - Victor Hugo       23004
4  2.417473 [km^2]        0                Bineau - Louise Michel       23011
5  2.417473 [km^2]       50               Pont de Levallois-bécon       23002
6  2.417473 [km^2]       26    Hôtel de Ville de Levallois Perret       23008
7  2.417473 [km^2]       50        Anatole France - Louise Michel       23009
8  2.417473 [km^2]       27             Voltaire - Anatole France       23010
9  2.417473 [km^2]       26              Gare de Clichy-Levallois       23005
10 2.417473 [km^2]       28             Président Wilson - Baudin       23003
       coordonnees_geo stationcode_count capacity_sum
1  48.893480, 2.277525                11          334
2  48.890566, 2.295078                11          334
3  48.898197, 2.293848                11          334
4  48.886662, 2.284327                11          334
5  48.898418, 2.279131                11          334
6  48.893145, 2.288882                11          334
7  48.888732, 2.288158                11          334
8  48.891999, 2.284263                11          334
9  48.896798, 2.298468                11          334
10 48.898269, 2.284934                11          334
                         geometry  capacity_density
1  POLYGON ((647761.4 6867307,... 16.13255 [1/km^2]
2  POLYGON ((647761.4 6867307,... 10.34138 [1/km^2]
3  POLYGON ((647761.4 6867307,... 14.89158 [1/km^2]
4  POLYGON ((647761.4 6867307,...  0.00000 [1/km^2]
5  POLYGON ((647761.4 6867307,... 20.68275 [1/km^2]
6  POLYGON ((647761.4 6867307,... 10.75503 [1/km^2]
7  POLYGON ((647761.4 6867307,... 20.68275 [1/km^2]
8  POLYGON ((647761.4 6867307,... 11.16869 [1/km^2]
9  POLYGON ((647761.4 6867307,... 10.75503 [1/km^2]
10 POLYGON ((647761.4 6867307,... 11.58234 [1/km^2]</code></pre>
</div>
</div>
</section>
<section id="exercices-supplémentaires" class="level2" data-number="4">
<h2 data-number="4" class="anchored" data-anchor-id="exercices-supplémentaires"><span class="header-section-number">4</span> Exercices supplémentaires</h2>
<div class="cell">
<div class="cell-output-display">
<div class="leaflet html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-632bccfa5ea3d3647eea" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-632bccfa5ea3d3647eea">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addTiles","args":["https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"https://openstreetmap.org/copyright/\">OpenStreetMap<\/a>,  <a href=\"https://opendatacommons.org/licenses/odbl/\">ODbL<\/a>"}]},{"method":"addCircleMarkers","args":[[48.92958488033948,48.87064747304836,48.92304796205147,48.84791249713572,48.85131540670229,48.84065892137151,48.84395729492689,48.84711159998629,48.85264791460283,48.89882999998643,48.83124010584268,48.86238297063333,48.87040602846935,48.84327733002149,48.841807179866,48.83372354343435,48.87525984131121,48.8490535919097,48.83996691498029,48.8759024071129,48.86068047372466,48.85972615789505,48.84063994428294,48.83769531914962,48.84483547123072,48.86141101463834,48.83959442799087,48.84150869037513,48.8243578221501,48.85337548424631,48.85135577956532,48.87611599998638,48.84476769998631,48.85286124870321,48.86854329998636,48.84584756135229,48.82965497550826,48.84362789998629,48.83380639998627,48.88879655647339,48.85129643365159,48.87479499482762,48.82859528384368,48.87104405197036,48.89730731034246,48.8562117999863,48.8455150897803,48.83115160295061,48.84524763510062,48.81942833335522],[2.3553590463413,2.324654790607701,2.3644428339961,2.28430598974228,2.291950285434724,2.35375240445137,2.379088215529919,2.3956204,2.27586641907692,2.37933,2.398910745978356,2.338482253253501,2.323243509808,2.30230766886348,2.319510026901171,2.386601903271429,2.249415814876557,2.325317971408367,2.3788625746965,2.322616316378116,2.314848195584221,2.32586044818163,2.27806180715561,2.275374233722688,2.297508493065835,2.3201214185208,2.301065772771836,2.350066713988781,2.377065159380435,2.3828620836139,2.369220033287999,2.288124,2.3110086,2.268483570651514,2.3600032,2.3017574474216,2.2638675570488,2.463046499999999,2.4132221,2.392581193192199,2.325061820447445,2.366669436984963,2.380220606266107,2.3661044619878,2.40079153681279,2.353253600000001,2.3726498446286,2.343822196125984,2.256901524960995,2.343335375189799],10,null,null,{"interactive":true,"className":"","stroke":false,"color":["#E31A1C","#E31A1C","#E31A1C","#E31A1C","#E31A1C","#E31A1C","#E31A1C","#E31A1C","#E31A1C","#E31A1C","#E31A1C","#E31A1C","#E31A1C","#E31A1C","#FD8D3C","#FD8D3C","#FD8D3C","#FD8D3C","#FD8D3C","#FD8D3C","#FD8D3C","#FD8D3C","#FD8D3C","#FD8D3C","#FD8D3C","#FECC5C","#FECC5C","#FECC5C","#FECC5C","#FECC5C","#FECC5C","#FECC5C","#FECC5C","#FECC5C","#FECC5C","#FECC5C","#FECC5C","#FFFFB2","#FFFFB2","#FFFFB2","#FFFFB2","#FFFFB2","#FFFFB2","#FFFFB2","#FFFFB2","#FFFFB2","#FFFFB2","#FFFFB2","#FFFFB2","#FFFFB2"],"weight":5,"opacity":0.5,"fill":true,"fillColor":["#E31A1C","#E31A1C","#E31A1C","#E31A1C","#E31A1C","#E31A1C","#E31A1C","#E31A1C","#E31A1C","#E31A1C","#E31A1C","#E31A1C","#E31A1C","#E31A1C","#FD8D3C","#FD8D3C","#FD8D3C","#FD8D3C","#FD8D3C","#FD8D3C","#FD8D3C","#FD8D3C","#FD8D3C","#FD8D3C","#FD8D3C","#FECC5C","#FECC5C","#FECC5C","#FECC5C","#FECC5C","#FECC5C","#FECC5C","#FECC5C","#FECC5C","#FECC5C","#FECC5C","#FECC5C","#FFFFB2","#FFFFB2","#FFFFB2","#FFFFB2","#FFFFB2","#FFFFB2","#FFFFB2","#FFFFB2","#FFFFB2","#FFFFB2","#FFFFB2","#FFFFB2","#FFFFB2"],"fillOpacity":0.5},null,null,["Station Clinique: 200 places disponibles","Station Humanisée Place de la Madeleine: 200 places disponibles","Station Brennus: 200 places disponibles","Emeriau - Beaugrenelle: 74 places disponibles","Grenelle - Dr Finlay: 71 places disponibles","Censier - Santeuil: 69 places disponibles","Gare de Lyon - Roland Barthes: 68 places disponibles","Fabre d'Eglantine - Place de la Nation: 68 places disponibles","Jean de la Fontaine - Boulainvilliers: 68 places disponibles","Macdonald - Césaria Evora: 67 places disponibles","Porte de Charenton: 67 places disponibles","Place du Palais Royal: 67 places disponibles","Malesherbes - Place de la Madeleine: 67 places disponibles","Cambronne - Mademoiselle: 67 places disponibles","Gare Montparnasse - Vaugirard: 66 places disponibles","François Truffaut - Saint Emilion: 66 places disponibles","Route de Sèvres - Porte de Bagatelle: 66 places disponibles","Saint-Placide - Cherche Midi: 66 places disponibles","Bercy.: 66 places disponibles","Rocher - Laborde: 65 places disponibles","Constantine - Université: 65 places disponibles","Musée d'Orsay: 65 places disponibles","Parc André Citroën: 65 places disponibles","Hôpital Européen Georges Pompidou: 64 places disponibles","Joseph Liouville - Croix Nivert: 64 places disponibles","Assemblée Nationale: 63 places disponibles","Place Adolphe Cherioux - Vaugirard: 63 places disponibles","Epée de Bois - Mouffetard: 63 places disponibles","Regnault - Patay: 63 places disponibles","Jean Macé - Faidherbe: 63 places disponibles","Bastille - Biscornet: 62 places disponibles","Grande Armée - Brunel: 62 places disponibles","Sèvres - Lecourbe: 62 places disponibles","Mozart - Jasmin: 62 places disponibles","René Boulanger - Lancry: 62 places disponibles","Cambronne - Villa Croix Nivert: 62 places disponibles","Place Lafayette: 62 places disponibles","Gare Rer de Fontenay sous Bois: 61 places disponibles","Bois de Vincennes.: 60 places disponibles","Cité de la Musique: 60 places disponibles","Square Boucicaut: 60 places disponibles","Granges aux Belles - Hôpital Saint-Louis: 60 places disponibles","M.- A. Lagroua Weill-Hallé -  F. Dolto: 60 places disponibles","Alibert - Jemmapes: 60 places disponibles","Place du Président Salvador Allende: 60 places disponibles","Lobau - Hôtel de Ville: 60 places disponibles","Gare de Lyon - Place Louis Armand: 60 places disponibles","Auguste Blanqui - Glacière: 60 places disponibles","Porte Molitor: 60 places disponibles","Jourdan - Stade Charléty: 60 places disponibles"],null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[48.81942833335522,48.92958488033948],"lng":[2.249415814876557,2.463046499999999]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>


</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>La librairie <i class="fa-brands fa-r-project" aria-label="r-project"></i> est expérimentale mais les prochaines semaines devraient permettre de combler ce manque. Une documentation interactive illustrant le code nécessaire pour reproduire telle ou telle carte est disponible sur <a href="https://linogaliana.github.io/cartiflette-website/index.html">linogaliana.github.io/cartiflette-website</a>.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Handle positioning of the toggle
      window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
      const annoteTargets = window.document.querySelectorAll('.code-annotation-anchor');
      for (let i=0; i<annoteTargets.length; i++) {
        const annoteTarget = annoteTargets[i];
        const targetCell = annoteTarget.getAttribute("data-target-cell");
        const targetAnnotation = annoteTarget.getAttribute("data-target-annotation");
        const contentFn = () => {
          const content = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          if (content) {
            const tipContent = content.cloneNode(true);
            tipContent.classList.add("code-annotation-tip-content");
            return tipContent.outerHTML;
          }
        }
        const config = {
          allowHTML: true,
          content: contentFn,
          onShow: (instance) => {
            selectCodeLines(instance.reference);
            instance.reference.classList.add('code-annotation-active');
            window.tippy.hideAll();
          },
          onHide: (instance) => {
            unselectCodeLines();
            instance.reference.classList.remove('code-annotation-active');
          },
          maxWidth: 300,
          delay: [50, 0],
          duration: [200, 0],
          offset: [5, 10],
          arrow: true,
          appendTo: function(el) {
            return el.parentElement.parentElement.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'quarto',
          placement: 'right',
          popperOptions: {
            modifiers: [
            {
              name: 'flip',
              options: {
                flipVariations: false, // true by default
                allowedAutoPlacements: ['right'],
                fallbackPlacements: ['right', 'top', 'top-start', 'top-end'],
              },
            },
            {
              name: 'preventOverflow',
              options: {
                mainAxis: false,
                altAxis: false
              }
            }
            ]        
          }      
        };
        window.tippy(annoteTarget, config); 
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>